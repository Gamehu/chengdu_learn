# agent管理平台设计 #

- 1.新增添加“业务系统”下拉列表（表示该agent是归属哪个业务系统）
- 2.新增的部署按钮改为保存按钮，或者保留部署按钮，新增一个保存按钮。保存按钮即只新增一条记录不发送部署命令，可到主页批量部署
- 3.主页操作：可批量（部署、删除、升级、重新部署）、新增（可导入excel进行新增）
- 4.主页显示新增agent版本、agent部署时间，信息（主要用于显示错误信息，比如密码错误等）字段
- 5.新增数据状态字段（0：未部署，1：部署成功，2：回退成功，3：已删除（逻辑删除），4：部署失败，5：回退失败，6：删除失败）
- 6.提供条件查询：状态、ip、操作系统查询
- 7.操作状态字段（1：部署（重新部署），2：删除）
- 9.新增cmdId字段，唯一标识每次操作，用于去kafka取值和传值，写值到kafka的taskcmd主题
- 11.按时检agent心跳，新增心跳状态字段（心跳正常，心跳异常），kafka的心跳主题包含：agentid，时间，。。
- 12.删除、重新部署等都需要推送ip等信息，并加上cmdid和操作状态字段，密码加密存储，加密传递
- 13.kafka主题新增taskcmdResult，用于agent或者agent server 操作后回写数据，以及web端消费
- 14.页面安装心跳检测时间，定时消费kafka心跳数据，用于页面显示agent是否异常


**agent表设计：**
	
	agentid 
	
	ip
	
	操作系统
	
	登陆方式

	用户名
	
	密码

	提示符
	
	数据状态
	
	部署版本
	
	部署时间
	
	错误信息
	
	业务系统
	
	cmdid

